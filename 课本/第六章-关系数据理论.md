# 关系数据理论

## 问题的提出

* 人们已经提出了很多类型的**数据依赖**，其中最重要的是函数依赖和多值依赖。
* 一个普通的关系通常存在的问题：
  * 数据冗余
  * 更新异常
  * 插入异常
  * 删除异常



## 规范化

### 函数依赖

> 设R(U)是属性及U上的一个关系模式，X，Y是U的子集，若对于R(U)上的任意一个可能的关系r，r中不可能存在两个远足在X上的属性值相等，而在Y上的属性值不等，则称**X函数确定Y**或**Y函数依赖X**，记作X->Y。

* 非平凡函数依赖：若X->Y，但Y不属于X。
* 平凡函数依赖：若X->Y，Y属于X。
* 决定因素：若X->Y，则X成为这个函数依赖的决定属性，也称决定因素
* 若X->Y，Y->X，记作X<-->Y
* 完全函数依赖：在R(U)中，若X->Y，并且对于X的任意一个真子集X'，都有X'不能确定Y，那么称Y对X完全函数依赖
* 部分函数依赖：
* 传递函数依赖：在R(U)中，若X->Y，Y不能确定X，Y->Z，那么称Z对X传递函数依赖

### 码

> 码是关系模式中的一个重要概念。

* 超码与候选码的关系：候选码是最小的超码

#### 多值依赖

> 设R(U)是属性集U上的一个关系模式，X，Y，Z是U的子集，且Z=U-X-Y。关系模式R(U)中多值依赖X->->Y成立，当且仅当对R(U)的任意一个关系r，给定一对（x，z）的值，有一组Y的值，这组值仅仅决定于X的值与Z值无关。

#### 范式

![7l5kG.png](https://s1.ax2x.com/2018/06/03/7l5kG.png)

![7lDDn.png](https://s1.ax2x.com/2018/06/03/7lDDn.png)

* 2nf:消除非主属性对主属性的部分函数依赖
* 3nf:消除非主属性对主属性的传递函数依赖
* bcnf:消除主属性对主属性的部分和传递函数依赖
* 4nf:消除非平凡且非函数依赖的多值依赖



## 模式分解

> 分解要具有无损连接性
>
> 分解要保持函数依赖
>
> 分解要具有无损连接性又要保持函数依赖