# 关系数据库

## 关系数据结构及形式化定义

### 关系

1. **域：**一组具有相同数据类型的值的集合。
2. **笛卡儿积：**

![](https://s1.ax2x.com/2018/06/02/7eLIe.png)

3. **关系：**
4. **候选码：**某一属性组的值能唯一标识一个元组，而他的子集不能，则称该属性组为**候选码。**
5. **主码：**若一个关系有多个候选码，则选定其中一个为**主码。**
6. **主属性：**包含在主码中的属性叫主属性。
7. **全码：**若关系模式的所有属性是这个关系模式的候选码，称为全码。

#### 基本关系的6条性质：

1. 列是同质的。
2. 不同的列可以出自同一个域。
3. 列的顺序无所谓。
4. 任意两个元组的候选码不能取相同的值。
5. 行的顺序无所谓。
6. 分量必须取原子值。


#### 关系模式

关系的描述称为关系模式。

![](https://s1.ax2x.com/2018/06/02/7eKOR.png)

> R：关系名。
>
> U：组成该关系的属性名的集合。
>
> D：U中的属性所来自的域。
>
> DOM：属性向域的映像集合。
>
> F：属性见数据的依赖关系集合。

**关系模式是静态的，而关系是动态的，随时间不断变化的。**



### 关系操作

#### 5个基本的关系操作：

选择，投影，并，差，笛卡儿积。

结构化查询语言：**SQL，**具有数据定义，数据控制功能。sql语言是一种**高度非过程化**的语言。



### 关系的完整性

关系模型中有三类完整性约束：**实体完整性，参照完整性和用户定义完整性。**

#### 实体完整性：

若属性A是基本关系R的**主属性**，那么A不能取空值。

#### 参照完整性：

**外码**的定义：

设F是基本关系R的一个或一组属性，但不是关系R的码，K是关系S的主码。如果F与K相对应，则称F是R的外码。并称关系R为参照关系，基本关系S为被参照关系。**关系R和S不一定是不同的关系。**

![](https://s1.ax2x.com/2018/06/02/7elXl.png)

参照完整性规则：

若属性或属性组F是关系R的**外码，**它与基本关系S的主码K相对应，则对于R中的每个元组在F上的值必须：

1. 或者等于空值（F的每个元组的属性均为空）。
2. 或者等于S中某个元组的主码值。



### 关系代数

#### 传统的关系运算

1. 并：
2. 差：
3. 交：（可以由差来表示）
4. 笛卡儿积：

#### 专门的关系运算符

1. 选择：
2. 投影：
3. 连接：比较运算符是‘=’的，称为**等值连接**，**自然链接**是特殊的等值连接，他要求两个关系中进行比较的分量必须是同名的属性组，并且在结果中把重复的属性列去掉。
4. 除：**象集**
5. 外连接：
6. 左外连接：
7. 右外连接：

![](https://s1.ax2x.com/2018/06/02/7e2K3.png)

![](https://s1.ax2x.com/2018/06/02/7e7nK.png)

